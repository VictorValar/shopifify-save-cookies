/**
                * DATALAYER Variable
                * Checkout & Transaction Data */

                __DL__products = [];{% for line_item in checkout.line_items %}

  __DL__products.push({
                      'id'          :{{line_item.product_id | json}}
  ,
                      'sku'         :{{line_item.sku | json}}
  ,
                      'variantId'   :{{line_item.variant_id | json}}
  ,
                      'name'        :{{line_item.title | json}}
  ,
                      'productType' :{{line_item.product.type | json}}
  ,
                      'price'       :{{line_item.price | money_without_currency | remove: "," | json}}
  ,
                      'quantity'    :{{line_item.quantity | json}}
  ,
                      'description' :{{line_item.product.description | strip_newlines | strip_html  | json }}
  ,
                      'imageURL'    : "https:{{line_item.product.featured_image.src|img_url:'grande'}}
  ",
                      'productURL'  : '{{shop.secure_url}}
  {{line_item.product.url}}
  '
                  });{% endfor %}
transactionData = {
                    'transactionNumber'      :{{checkout.order_id | json}}
,
                    'transactionId'          :{{checkout.order_number | json}}
,
                    'transactionAffiliation' :{{shop.name | json}}
,
                    'transactionTotal'       :{{checkout.total_price | money_without_currency| remove: "," | json}}
,
                    'transactionTax'         :{{checkout.tax_price | money_without_currency| remove: "," | json}}
,
                    'transactionShipping'    :{{checkout.shipping_price | money_without_currency| remove: "," | json}}
,
                    'transactionSubtotal'    :{{checkout.subtotal_price | money_without_currency| remove: "," | json}}
,
{% for discount in checkout.discounts %}
  'promoCode' :
  {{discount.code | json}}
  ,
                      'discount'  :{{discount.amoun t | money_without_currency | json}}
  ,
{% endfor %}

'products': __DL__products
                };

                if(__DL__.debug == true){

                    /** DATALAYER: Transaction */
                    if(document.location.pathname.match(/.*order.*/g)||document.location.pathname.match(/.*pending.*/g)){
                        dataLayer.push(transactionData,{
                            'pageType' :'Transaction',
                            'event'    :'Transaction'
                        });
                        console.log("Transaction Data"+" :"+JSON.stringify(transactionData, null, " "));
                    }
                }

                /** DATALAYER: Checkout */
                if(Shopify.Checkout){
                    if(Shopify.Checkout.step){
                        if(Shopify.Checkout.step.length > 0){
                            if (Shopify.Checkout.step === 'contact_information'){
                                dataLayer.push(transactionData,{
                                    'event'    :'Customer Information',
                                    'pageType' :'Customer Information'});
                                    console.log("Customer Information - Transaction Data"+" :"+JSON.stringify(transactionData, null, " "));
                                }else if (Shopify.Checkout.step === 'shipping_method'){
                                    dataLayer.push(transactionData,{
                                        'event'    :'Shipping Information',
                                        'pageType' :'Shipping Information'});
                                        console.log("Shipping - Transaction Data"+" :"+JSON.stringify(transactionData, null, " "));
                                    }else if( Shopify.Checkout.step === "payment_method" ){
                                        dataLayer.push(transactionData,{
                                            'event'    :'Add Payment Info',
                                            'pageType' :'Add Payment Info'});
                                            console.log("Payment - Transaction Data"+" :"+JSON.stringify(transactionData, null, " "));
                                        }
                                    }

                                    if(__DL__.debug == true){
                                        /** DATALAYER: Transaction */
                                        if(Shopify.Checkout.page == "thank_you"){
                                            dataLayer.push(transactionData,{
                                                'pageType' :'Transaction',
                                                'event'    :'Transaction'
                                            });
                                            console.log("Transaction Data"+" :"+JSON.stringify(transactionData, null, " "));
                                        }
                                    }else{
                                        /** DATALAYER: Transaction */
                                        if(Shopify.Checkout.page == "thank_you"){
                                            dataLayer.push(transactionData,{
                                                'pageType' :'Transaction',
                                                'event'    :'Transaction'
                                            });
                                        }
                                    }
                                }
                            }}